<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loan EMI Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body
    class="bg-gray-100 flex items-center justify-center h-screen transition-colors duration-300"
    id="body"
  >
    <div class="absolute top-4 right-4">
      <button
        onclick="toggleDarkMode()"
        id="darkModeToggle"
        class="bg-gray-800 text-white px-4 py-2 rounded"
      >
        Dark Mode
      </button>
    </div>

    <div
      class="bg-white shadow-lg rounded-lg p-6 w-96 transition-colors duration-300"
      id="container"
    >
      <h2 class="text-xl font-bold text-center mb-4">Loan EMI Calculator</h2>

      <label class="block">Loan Amount (₹)</label>
      <input
        id="loanAmount"
        type="number"
        class="w-full p-2 border rounded mb-3 transition-colors duration-300"
      />

      <label class="block">Interest Rate (%)</label>
      <input
        id="interestRate"
        type="number"
        step="0.1"
        class="w-full p-2 border rounded mb-3 transition-colors duration-300"
      />

      <label class="block">Loan Tenure (Months)</label>
      <input
        id="loanTenure"
        type="number"
        class="w-full p-2 border rounded mb-3 transition-colors duration-300"
      />

      <button
        onclick="calculateEMI()"
        class="w-full bg-blue-500 text-white p-2 rounded"
      >
        Calculate
      </button>

      <div id="result" class="mt-4 hidden">
        <h3 class="text-lg font-semibold">EMI: ₹<span id="emiValue"></span></h3>
        <p>Total Payment: ₹<span id="totalPayment"></span></p>
        <p>Total Interest: ₹<span id="totalInterest"></span></p>
        <canvas id="emiChart" class="mt-4"></canvas>
      </div>
    </div>

    <script>
      function calculateEMI() {
        let P = parseFloat(document.getElementById("loanAmount").value);
        let r =
          parseFloat(document.getElementById("interestRate").value) / 12 / 100;
        let n = parseInt(document.getElementById("loanTenure").value);

        let emi = (P * r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
        let totalPayment = emi * n;
        let totalInterest = totalPayment - P;

        document.getElementById("emiValue").innerText = emi.toFixed(2);
        document.getElementById("totalPayment").innerText =
          totalPayment.toFixed(2);
        document.getElementById("totalInterest").innerText =
          totalInterest.toFixed(2);
        document.getElementById("result").classList.remove("hidden");

        let ctx = document.getElementById("emiChart").getContext("2d");
        new Chart(ctx, {
          type: "pie",
          data: {
            labels: ["Principal Amount", "Total Interest"],
            datasets: [
              {
                data: [P, totalInterest],
                backgroundColor: ["#4CAF50", "#FF5733"],
              },
            ],
          },
        });
      }

      function toggleDarkMode() {
        let body = document.getElementById("body");
        let container = document.getElementById("container");
        let inputs = document.querySelectorAll("input");
        let button = document.getElementById("darkModeToggle");

        body.classList.toggle("bg-gray-900");
        // body.classList.toggle("text-white");
        container.classList.toggle("bg-gray-800");
        // container.classList.toggle("text-white");

        inputs.forEach((input) => {
          input.classList.toggle("bg-gray-700");
          // input.classList.toggle("text-white");
          input.classList.toggle("border-gray-600");
        });

        if (body.classList.contains("bg-gray-900")) {
          button.innerText = "Light Mode";
        } else {
          button.innerText = "Dark Mode";
        }
      }
    </script>
  </body>
</html>
